<!DOCTYPE html>
<!-- saved from url=(0122)https://velog.io/@hamjw0122/React-Query-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0-2-select -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기</title><link data-rh="true" rel="canonical" href="https://velog.io/@hamjw0122/React-Query-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0-2-select"><meta data-rh="true" property="fb:app_id" content="203040656938507"><meta data-rh="true" name="description" content="어떻게 프론트엔드에서 데이터를 필터링할 수 있을까?
"><meta data-rh="true" property="og:url" content="https://velog.io/@hamjw0122/React-Query-제대로-사용해보기-2-select"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="og:title" content="🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기"><meta data-rh="true" property="og:description" content="어떻게 프론트엔드에서 데이터를 필터링할 수 있을까?
"><meta data-rh="true" property="og:image" content="https://velog.velcdn.com/images/hamjw0122/post/d68c802d-33ec-4bc8-b809-f624d8ada377/image.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:title" content="🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기"><meta data-rh="true" name="twitter:description" content="어떻게 프론트엔드에서 데이터를 필터링할 수 있을까?
"><meta data-rh="true" name="twitter:image" content="https://velog.velcdn.com/images/hamjw0122/post/d68c802d-33ec-4bc8-b809-f624d8ada377/image.png"><style data-styled="active" data-styled-version="5.3.3"></style><link data-chunk="main" rel="preload" as="style" href="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/main.e7869632.chunk.css"><link data-chunk="main" rel="preload" as="style" href="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/20.5dbdccff.chunk.css"><link data-chunk="main" rel="preload" as="script" href="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/runtime-main.43efb87e.js"><link data-chunk="main" rel="preload" as="script" href="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/20.d22ca79b.chunk.js"><link data-chunk="main" rel="preload" as="script" href="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/main.7939daee.chunk.js"><link data-chunk="pages-velog-VelogPage" rel="preload" as="script" href="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/pages-velog-VelogPage.3343bdaf.chunk.js"><link data-chunk="PostPage" rel="preload" as="script" href="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/0.9dceead3.chunk.js"><link data-chunk="PostPage" rel="preload" as="script" href="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/23.16ad14b0.chunk.js"><link data-chunk="PostPage" rel="preload" as="script" href="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/1.91809a3e.chunk.js"><link data-chunk="PostPage" rel="preload" as="script" href="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/PostPage.8d064426.chunk.js"><link data-chunk="main" rel="stylesheet" href="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/20.5dbdccff.chunk.css"><link data-chunk="main" rel="stylesheet" href="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/main.e7869632.chunk.css"><link rel="shortcut icon" href="https://static.velog.io/favicon.ico"><link rel="apple-touch-icon" sizes="152x152" href="https://static.velog.io/favicons/apple-icon-152x152.png"><link rel="icon" sizes="32x32" href="https://static.velog.io/favicons/favicon-32x32.png"><link rel="icon" sizes="96x96" href="https://static.velog.io/favicons/favicon-96x96.png"><link rel="icon" sizes="16x16" href="https://static.velog.io/favicons/favicon-16x16.png"><meta name="viewport" content="width=device-width, initial-scale=1"><script src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/sdk.js" async="" crossorigin="anonymous"></script><script src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/f(5).txt"></script><script id="facebook-jssdk" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/sdk(1).js"></script><script async="" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/f(6).txt" crossorigin="anonymous" data-checked-head="true"></script><script async="" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/js"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
          
            gtag('config', 'G-8D0MD2S4PK');</script><script defer="" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/api.js"></script><meta http-equiv="origin-trial" content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="><meta http-equiv="origin-trial" content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="><meta http-equiv="origin-trial" content="A9wSqI5i0iwGdf6L1CERNdmsTPgVu44ewj8QxTBYgsv1LCPUVF7YmWOvTappqB1139jAymxUW/RO8zmMqo4zlAAAAACNeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiRmxlZGdlQmlkZGluZ0FuZEF1Y3Rpb25TZXJ2ZXIiLCJleHBpcnkiOjE3MzY4MTI4MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="A+d7vJfYtay4OUbdtRPZA3y7bKQLsxaMEPmxgfhBGqKXNrdkCQeJlUwqa6EBbSfjwFtJWTrWIioXeMW+y8bWAgQAAACTeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiRmxlZGdlQmlkZGluZ0FuZEF1Y3Rpb25TZXJ2ZXIiLCJleHBpcnkiOjE3MzY4MTI4MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><script async="" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/ca-pub-9161852896103498"></script><script async="" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/AGSKWxVQ1y47LMt6CCceefk8hSilRNfVOM1y3_E7oTtVusEy0GgJMt9myJWn9eHKMCnuzZeziBrBJajBHaaO7713ESBUSxNJt8S84saX92BeAePQPBeXqaSDcYT9n9v-U1YJ_z1yH3Eevw=="></script><script async="" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/AGSKWxU07p5Gl6AzjsDE0CDtojnrIG-RcEMaR4mtBKcSTVwdDMETloOAIQ0EtUHoDgYwPp2-beL7nFg2SYXbZvku1rHS2xRafPeampO7n_1SFjxew52tVOonM2FW3PCH2cELlfNz5pf7bA=="></script><style type="text/css" data-fbcssmodules="css:fb.css.base css:fb.css.dialog css:fb.css.iframewidget">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0px;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:'lucida grande', tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0px;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:'lucida grande', tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82,82,82,.7);position:absolute;top:-10000px;z-index:10001}.fb_dialog_advanced{border-radius:8px;padding:10px}.fb_dialog_content{background:#fff;color:#373737}.fb_dialog_close_icon{background:url(https://connect.facebook.net/rsrc.php/v4/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{left:5px;right:auto;top:5px}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://connect.facebook.net/rsrc.php/v4/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(https://connect.facebook.net/rsrc.php/v4/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://connect.facebook.net/rsrc.php/v4/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{height:100%;left:0px;margin:0px;overflow:visible;position:absolute;top:-10000px;transform:none;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://connect.facebook.net/rsrc.php/v4/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{background:none;height:auto;min-height:initial;min-width:initial;width:auto}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{clear:both;color:white;display:block;font-size:18px;padding-top:20px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0,0,0,.4);bottom:0;left:0;min-height:100%;position:absolute;right:0;top:0;width:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_mobile .fb_dialog_iframe{position:sticky;top:0}.fb_dialog_content .dialog_header{background:linear-gradient(from(#738aba), to(#2c4987));border-bottom:1px solid;border-color:#043b87;box-shadow:white 0px 1px 1px -1px inset;color:#fff;font:bold 14px Helvetica, sans-serif;text-overflow:ellipsis;text-shadow:rgba(0,30,84,.296875) 0px -1px 0px;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:linear-gradient(from(#4267b2), to(#2a4887));background-clip:padding-box;border:1px solid #29487d;border-radius:3px;display:inline-block;line-height:18px;margin-top:3px;max-width:85px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{background:none;border:none;color:white;font:bold 12px Helvetica, sans-serif;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0,30,84,.296875) 0px -1px 0px}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://connect.facebook.net/rsrc.php/v4/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #4a4a4a;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f5f6f7;border:1px solid #4a4a4a;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://connect.facebook.net/rsrc.php/v4/yD/r/t-wz8gw1xG1.png);background-position:50% 50%;background-repeat:no-repeat;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}</style><script async="" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/AGSKWxXUDlA7XcUFtn8KGgygJbzZD23o-dVOdcBgS_P_B4fTKpYR3USt1EYsxhn7n6fRm7boLrmsFM94TTQZHPTGZNY663m7OFpG2-JNxln4m1DFtdJlWBt4BK0vfO2HBB0Xl-RIswvrhA=="></script></head><body data-theme="light" style="overflow-y: initial;"><div id="root"><div class="__jazzbar false false" style="width:0%"></div><div class="sc-dPiLbb sc-bBHHxi kTIDXm"><div class="sc-bBHxTw jEdNvQ"><div class="sc-fFeiMQ cQvXTx sc-iJKOTD hrgwyc"><div class="sc-kfPuZi ddFdew"><a href="https://velog.io/" class="sc-egiyK cyyZlI sc-fKVqWL kdLiUF"><svg width="192" height="192" viewBox="0 0 192 192" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M24 0H168C181.255 0 192 10.7451 192 24V168C192 181.255 181.255 192 168 192H24C10.7451 192 0 181.255 0 168V24C0 10.7451 10.7451 0 24 0ZM49 57.9199V65.48H67L80.6799 142.52L98.5 141.26C116.02 119.06 127.84 102.44 133.96 91.3999C140.2 80.24 143.32 70.9399 143.32 63.5C143.32 59.0601 142 55.7 139.36 53.4199C136.84 51.1399 133.66 50 129.82 50C122.62 50 116.62 53.0601 111.82 59.1799C116.5 62.3 119.68 64.8799 121.36 66.9199C123.16 68.8401 124.06 71.4199 124.06 74.6599C124.06 80.0601 122.44 86.1799 119.2 93.02C116.08 99.8601 112.66 105.92 108.94 111.2C106.54 114.56 103.48 118.7 99.76 123.62L88.0601 57.2C87.1001 52.3999 84.1001 50 79.0601 50C76.78 50 72.3999 50.96 65.9199 52.8799C59.4399 54.6799 53.8 56.3601 49 57.9199Z" fill="currentColor"></path></svg></a><a href="https://velog.io/@hamjw0122/posts" class="sc-egiyK cyyZlI user-logo"><span>Jane_Log</span></a></div><div class="sc-giYglK gHrJRn"><a href="https://velog.io/notifications" class="sc-egiyK cyyZlI sc-cxpSdN pAGEY"><svg width="24" height="24" viewBox="0 0 24 24"><g id="Icon_Notification"><path id="notifications" d="M4 19V17H6V10C6 8.61667 6.41667 7.3875 7.25 6.3125C8.08333 5.2375 9.16667 4.53333 10.5 4.2V3.5C10.5 3.08333 10.6458 2.72917 10.9375 2.4375C11.2292 2.14583 11.5833 2 12 2C12.4167 2 12.7708 2.14583 13.0625 2.4375C13.3542 2.72917 13.5 3.08333 13.5 3.5V4.2C14.8333 4.53333 15.9167 5.2375 16.75 6.3125C17.5833 7.3875 18 8.61667 18 10V17H20V19H4ZM12 22C11.45 22 10.9792 21.8042 10.5875 21.4125C10.1958 21.0208 10 20.55 10 20H14C14 20.55 13.8042 21.0208 13.4125 21.4125C13.0208 21.8042 12.55 22 12 22ZM8 17H16V10C16 8.9 15.6083 7.95833 14.825 7.175C14.0417 6.39167 13.1 6 12 6C10.9 6 9.95833 6.39167 9.175 7.175C8.39167 7.95833 8 8.9 8 10V17Z" fill="currentColor"></path></g></svg></a><a class="sc-iwjdpV glTvbH" href="https://velog.io/search?username=hamjw0122"><svg width="24" height="24" viewBox="0 0 24 24"><g id="Icon_Search"><path id="search" d="M19.3256 20.7122L13.5174 14.9041C13.0116 15.3227 12.4231 15.6495 11.752 15.8847C11.0801 16.1205 10.3692 16.2384 9.61919 16.2384C7.77035 16.2384 6.20477 15.5972 4.92244 14.3149C3.64081 13.0333 3 11.468 3 9.61919C3 7.77035 3.63663 6.20477 4.90988 4.92244C6.18314 3.64081 7.74419 3 9.59302 3C11.4593 3 13.0336 3.64081 14.3159 4.92244C15.5976 6.20477 16.2384 7.77035 16.2384 9.61919C16.2384 10.3692 16.1208 11.0798 15.8857 11.7509C15.6499 12.4228 15.3227 13.0203 14.9041 13.5436L20.7384 19.3517C20.9128 19.5262 21 19.7442 21 20.0058C21 20.2674 20.9041 20.5029 20.7122 20.7122C20.5203 20.9041 20.2894 21 20.0194 21C19.7487 21 19.5174 20.9041 19.3256 20.7122ZM9.61919 14.2762C10.9099 14.2762 12.0087 13.8227 12.9157 12.9157C13.8227 12.0087 14.2762 10.9099 14.2762 9.61919C14.2762 8.31105 13.8227 7.20767 12.9157 6.30907C12.0087 5.41116 10.9099 4.96221 9.61919 4.96221C8.31105 4.96221 7.20802 5.41116 6.31012 6.30907C5.41151 7.20767 4.96221 8.31105 4.96221 9.61919C4.96221 10.9099 5.41151 12.0087 6.31012 12.9157C7.20802 13.8227 8.31105 14.2762 9.61919 14.2762Z" fill="currentColor"></path></g></svg></a><button color="darkGray" class="sc-bqiRlB fldlST">로그인</button></div></div></div><div style="margin-top: -64px; opacity: 0;" class="sc-cTAqQK bxsBRa"><div class="sc-bBHxTw jEdNvQ"><div class="sc-fFeiMQ cQvXTx sc-iJKOTD hrgwyc"><div class="sc-kfPuZi ddFdew"><a href="https://velog.io/" class="sc-egiyK cyyZlI sc-fKVqWL kdLiUF"><svg width="192" height="192" viewBox="0 0 192 192" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M24 0H168C181.255 0 192 10.7451 192 24V168C192 181.255 181.255 192 168 192H24C10.7451 192 0 181.255 0 168V24C0 10.7451 10.7451 0 24 0ZM49 57.9199V65.48H67L80.6799 142.52L98.5 141.26C116.02 119.06 127.84 102.44 133.96 91.3999C140.2 80.24 143.32 70.9399 143.32 63.5C143.32 59.0601 142 55.7 139.36 53.4199C136.84 51.1399 133.66 50 129.82 50C122.62 50 116.62 53.0601 111.82 59.1799C116.5 62.3 119.68 64.8799 121.36 66.9199C123.16 68.8401 124.06 71.4199 124.06 74.6599C124.06 80.0601 122.44 86.1799 119.2 93.02C116.08 99.8601 112.66 105.92 108.94 111.2C106.54 114.56 103.48 118.7 99.76 123.62L88.0601 57.2C87.1001 52.3999 84.1001 50 79.0601 50C76.78 50 72.3999 50.96 65.9199 52.8799C59.4399 54.6799 53.8 56.3601 49 57.9199Z" fill="currentColor"></path></svg></a><a href="https://velog.io/@hamjw0122/posts" class="sc-egiyK cyyZlI user-logo"><span>Jane_Log</span></a></div><div class="sc-giYglK gHrJRn"><a href="https://velog.io/notifications" class="sc-egiyK cyyZlI sc-cxpSdN pAGEY"><svg width="24" height="24" viewBox="0 0 24 24"><g id="Icon_Notification"><path id="notifications" d="M4 19V17H6V10C6 8.61667 6.41667 7.3875 7.25 6.3125C8.08333 5.2375 9.16667 4.53333 10.5 4.2V3.5C10.5 3.08333 10.6458 2.72917 10.9375 2.4375C11.2292 2.14583 11.5833 2 12 2C12.4167 2 12.7708 2.14583 13.0625 2.4375C13.3542 2.72917 13.5 3.08333 13.5 3.5V4.2C14.8333 4.53333 15.9167 5.2375 16.75 6.3125C17.5833 7.3875 18 8.61667 18 10V17H20V19H4ZM12 22C11.45 22 10.9792 21.8042 10.5875 21.4125C10.1958 21.0208 10 20.55 10 20H14C14 20.55 13.8042 21.0208 13.4125 21.4125C13.0208 21.8042 12.55 22 12 22ZM8 17H16V10C16 8.9 15.6083 7.95833 14.825 7.175C14.0417 6.39167 13.1 6 12 6C10.9 6 9.95833 6.39167 9.175 7.175C8.39167 7.95833 8 8.9 8 10V17Z" fill="currentColor"></path></g></svg></a><a class="sc-iwjdpV glTvbH" href="https://velog.io/search?username=hamjw0122"><svg width="24" height="24" viewBox="0 0 24 24"><g id="Icon_Search"><path id="search" d="M19.3256 20.7122L13.5174 14.9041C13.0116 15.3227 12.4231 15.6495 11.752 15.8847C11.0801 16.1205 10.3692 16.2384 9.61919 16.2384C7.77035 16.2384 6.20477 15.5972 4.92244 14.3149C3.64081 13.0333 3 11.468 3 9.61919C3 7.77035 3.63663 6.20477 4.90988 4.92244C6.18314 3.64081 7.74419 3 9.59302 3C11.4593 3 13.0336 3.64081 14.3159 4.92244C15.5976 6.20477 16.2384 7.77035 16.2384 9.61919C16.2384 10.3692 16.1208 11.0798 15.8857 11.7509C15.6499 12.4228 15.3227 13.0203 14.9041 13.5436L20.7384 19.3517C20.9128 19.5262 21 19.7442 21 20.0058C21 20.2674 20.9041 20.5029 20.7122 20.7122C20.5203 20.9041 20.2894 21 20.0194 21C19.7487 21 19.5174 20.9041 19.3256 20.7122ZM9.61919 14.2762C10.9099 14.2762 12.0087 13.8227 12.9157 12.9157C13.8227 12.0087 14.2762 10.9099 14.2762 9.61919C14.2762 8.31105 13.8227 7.20767 12.9157 6.30907C12.0087 5.41116 10.9099 4.96221 9.61919 4.96221C8.31105 4.96221 7.20802 5.41116 6.31012 6.30907C5.41151 7.20767 4.96221 8.31105 4.96221 9.61919C4.96221 10.9099 5.41151 12.0087 6.31012 12.9157C7.20802 13.8227 8.31105 14.2762 9.61919 14.2762Z" fill="currentColor"></path></g></svg></a><button color="darkGray" class="sc-bqiRlB fldlST">로그인</button></div></div></div></div><div class="sc-TBWPX dXONqK sc-jQrDum fiOuRZ"><div class="head-wrapper"><h1>🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기</h1><div class="sc-fvxzrP jGdQwA"><div class="information"><span class="username"><a href="https://velog.io/@hamjw0122/posts" class="sc-egiyK cyyZlI">Jane</a></span><span class="separator">·</span><span>2023년 11월 12일</span></div><div class="sc-fbyfCU eYeYLy"><div data-testid="follow-btn" class="sc-avest iIZjji"><button class="follow-button button"><span>팔로우</span></button></div><button data-testid="like-btn" class="sc-eldieg gyXrCE"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M18 1l-6 4-6-4-6 5v7l12 10 12-10v-7z"></path></svg><span>3</span></button></div></div><div class="sc-cZMNgc bpMcZw"><a class="sc-dtMgUX gISUXI" href="https://velog.io/tags/React">React</a><a class="sc-dtMgUX gISUXI" href="https://velog.io/tags/react-query">react-query</a><a class="sc-dtMgUX gISUXI" href="https://velog.io/tags/%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC">라이브러리</a></div><div class="sc-bQtKYq kzTxBt"><div class="sc-fXEqDS brUzDR"><div class="sc-jHkVzv sc-FNXRL knjEeh"><div data-testid="like" active="false" style="transform:scale(1)" class="sc-jWUzzU gCPYbd"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M18 1l-6 4-6-4-6 5v7l12 10 12-10v-7z"></path></svg></div><div class="sc-eFegNN djwcYU">3</div><div class="sc-fmBCVi dZrsFD"><div class="positioner"><div style="opacity:0;transform:translate(0px, 0px)" class="sc-lkgTHX bxhFtZ"><div class="sc-jWUzzU gCPYbd"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></div></div><div style="opacity:0;transform:translate(0px)" class="sc-lkgTHX bxhFtZ"><div class="sc-jWUzzU gCPYbd"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></div></div><div style="opacity:0;transform:translate(0px, 0px)" class="sc-lkgTHX bxhFtZ"><div class="sc-jWUzzU gCPYbd"><svg width="24" height="24" viewBox="0 0 24 24"><path d="M21.586 10.461l-10.05 10.075c-1.95 1.949-5.122 1.949-7.071 0s-1.95-5.122 0-7.072l10.628-10.585c1.17-1.17 3.073-1.17 4.243 0 1.169 1.17 1.17 3.072 0 4.242l-8.507 8.464c-.39.39-1.024.39-1.414 0s-.39-1.024 0-1.414l7.093-7.05-1.415-1.414-7.093 7.049c-1.172 1.172-1.171 3.073 0 4.244s3.071 1.171 4.242 0l8.507-8.464c.977-.977 1.464-2.256 1.464-3.536 0-2.769-2.246-4.999-5-4.999-1.28 0-2.559.488-3.536 1.465l-10.627 10.583c-1.366 1.368-2.05 3.159-2.05 4.951 0 3.863 3.13 7 7 7 1.792 0 3.583-.684 4.95-2.05l10.05-10.075-1.414-1.414z" fill="currentColor"></path></svg></div></div></div></div><div><div style="position:relative" class="sc-jWUzzU gCPYbd"><svg width="24" height="24" viewBox="0 0 24 24" class="share"><path fill="currentColor" d="M5 7c2.761 0 5 2.239 5 5s-2.239 5-5 5-5-2.239-5-5 2.239-5 5-5zm11.122 12.065c-.073.301-.122.611-.122.935 0 2.209 1.791 4 4 4s4-1.791 4-4-1.791-4-4-4c-1.165 0-2.204.506-2.935 1.301l-5.488-2.927c-.23.636-.549 1.229-.943 1.764l5.488 2.927zm7.878-15.065c0-2.209-1.791-4-4-4s-4 1.791-4 4c0 .324.049.634.122.935l-5.488 2.927c.395.535.713 1.127.943 1.764l5.488-2.927c.731.795 1.77 1.301 2.935 1.301 2.209 0 4-1.791 4-4z"></path></svg></div></div></div></div></div><div class="sc-jlRLRk iGRQXB"><div class="sc-dUbtfd kOYWDF"><div class="sc-jHkVzv dyVEVs sc-htJRVC jfYEFP"><div class="sc-cbTzjv kUqjof" style="margin-left: 0px;"><a href="https://velog.io/@hamjw0122/React-Query-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0-2-select#-%EC%B0%BE%EC%95%84%EB%B3%B4%EA%B2%8C-%EB%90%9C-%EA%B3%84%EA%B8%B0">🤔 찾아보게 된 계기</a></div><div class="sc-cbTzjv kUqjof" style="margin-left: 0px;"><a href="https://velog.io/@hamjw0122/React-Query-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0-2-select#%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EB%B3%80%ED%98%95%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-%EB%B0%A9%EB%B2%95%EB%93%A4">데이터를 변형할 수 있는 방법들</a></div><div class="sc-cbTzjv kUqjof" style="margin-left: 12px;"><a href="https://velog.io/@hamjw0122/React-Query-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0-2-select#%F0%9F%9F%A0-queryfn%EC%97%90%EC%84%9C-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0">🟠 queryFn에서 구현하기</a></div><div class="sc-cbTzjv kUqjof" style="margin-left: 12px;"><a href="https://velog.io/@hamjw0122/React-Query-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0-2-select#%F0%9F%9F%A1-%EB%A0%8C%EB%8D%94%EB%A7%81-%ED%95%A8%EC%88%98%EC%97%90%EC%84%9C-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0">🟡 렌더링 함수에서 구현하기</a></div><div class="sc-cbTzjv kUqjof" style="margin-left: 0px;"><a href="https://velog.io/@hamjw0122/React-Query-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0-2-select#%F0%9F%A4%A0-select-%EC%98%B5%EC%85%98%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B4%85%EC%8B%9C%EB%8B%A4">🤠 Select 옵션을 사용해봅시다!</a></div><div class="sc-cbTzjv kUqjof" style="margin-left: 12px;"><a href="https://velog.io/@hamjw0122/React-Query-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0-2-select#-select-%EC%98%B5%EC%85%98">👾 Select 옵션</a></div><div class="sc-cbTzjv kUqjof" style="margin-left: 12px;"><a href="https://velog.io/@hamjw0122/React-Query-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0-2-select#-selector-memoization">💾 Selector Memoization</a></div><div class="sc-cbTzjv kUqjof" style="margin-left: 12px;"><a href="https://velog.io/@hamjw0122/React-Query-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0-2-select#%F0%9F%A7%90-select%ED%95%B4%EC%95%BC-%ED%95%98%EB%8A%94-%EA%B0%92%EC%9D%B4-%EC%97%AC%EB%9F%AC-%EC%A2%85%EB%A5%98%EB%9D%BC%EB%A9%B4">🧐 select해야 하는 값이 여러 종류라면?</a></div></div></div></div><div class="sc-jIkXHa loMAkm"><h2><a href="https://velog.io/@hamjw0122/series/%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC-%EC%A0%81%EC%9A%A9%EA%B8%B0">프레임워크/라이브러리</a></h2><svg width="32" height="48" fill="currentColor" viewBox="0 0 32 48" class="series-corner-image"><path fill="currentColor" d="M32 0H0v48h.163l16-16L32 47.836V0z"></path></svg><div class="sc-hmjpVf EuzLS"><div class="sc-jOxtWs byLNvf"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"></path></svg>목록 보기</div><div class="sc-ZOtfp fOdzda"><div class="series-number">4<!-- -->/<!-- -->5</div><div class="sc-eLwHnm bsYDCu"><button class="sc-bTfYFJ jSfrkj"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg></button><button class="sc-bTfYFJ jSfrkj"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></div></div></div></div></div><img src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/image.png" alt="post-thumbnail" class="sc-gsNilK eZStMw"></div><div class="sc-TBWPX dXONqK sc-kmQMED cALPIq"><ins class="adsbygoogle" style="display: block; text-align: center; height: 192px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9161852896103498" data-ad-slot="6869845586" data-adsbygoogle-status="done" data-ad-status="filled"><div id="aswift_1_host" style="border: none; height: 192px; width: 768px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: inline-block;"><iframe id="aswift_1" name="aswift_1" browsingtopics="true" style="left:0;position:absolute;top:0;border:0;width:768px;height:192px;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="768" height="192" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allow="attribution-reporting; run-ad-auction" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/ads.html" data-google-container-id="a!2" tabindex="0" title="Advertisement" aria-label="Advertisement" data-google-query-id="COLlsp6NmowDFR_JFgUdBjYlOQ" data-load-complete="true"></iframe></div></ins></div><div class="sc-dFtzxp bfzjcP"><div class="sc-bXTejn FTZwa"><div class="sc-eGRUor gdnhbG atom-one"><h2 id="-찾아보게-된-계기">🤔 찾아보게 된 계기</h2>
<p>토이 프로젝트에서 Open API에서 불러온 데이터를 필터링하는 로직을 구현하게 되었다.<br>
<img src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/image(1).png"></p>
<p>위와 같은 형태의 컴포넌트였는데, 어떻게 필터값을 반영해야 할 지에 대해 고민이 많았다.<br>
물론 필터링 종류가 많아서도 맞지만, 가장 고민이었던 점은<br>
Open API에서 값을 받아오기 때문에 원하는 필터 값을 프론트에서 직접 구현해야 한다는 점이었다.<br>
어떻게 하면 클라이언트에서 필터링 되지 않은 채로 받은 응답 값을 정제할 때,<br>
최소한의 API 요청과 최대한의 퍼포먼스를 낼 수 있을까?<br>
이에 대해 react-query의 데이터를 변형하는 좋은 방법들이 있어서 정리해보고자 한다.</p>
<pre class=" language-null"><code class=" language-null">👩‍💻 가능하다면 백엔드에서 처리하는 것도 좋은 방법입니다.!</code></pre>
<h2 id="데이터를-변형할-수-있는-방법들">데이터를 변형할 수 있는 방법들</h2>
<h3 id="🟠-queryfn에서-구현하기">🟠 queryFn에서 구현하기</h3>
<ul>
<li>queryFn<br>
- <code>useQuery</code>에 전달해야 하는 함수이다.<ul>
<li>Promise 값을 반환할 것을 예상하며, 결과 값은 query cache에 저장된다.</li>
</ul></li>
<li>하지만 꼭 백엔드에서 전달되는 값 원형 그대로를 반환할 필요는 없으므로 queryFn을 통해서 값을 변형하는 것도 가능하다.<br>
- 이를 통해 프론트엔드에서는 마치 원래 백엔드에서 이 형태의 값을 전달받은 것처럼 사용할 수 있다.</li>
</ul>
<pre class=" language-null"><code class=" language-null">const fetchAnimalList = async (): Promise&lt;Animal[]&gt; =&gt; {
  const response = await axios.get('/animalList/Seoul')
  const data: Animal[] = response.data

  return data.map((animal) =&gt; animal.name.toUpperCase())
}

export const useGetAnimalList = () =&gt;
  useQuery({
    queryKey: ['animalList'],
    queryFn: fetchAnimalList,
  })
</code></pre>
<ul>
<li>위의 코드의 경우, 프론트엔드 측에서는 동물의 이름이 대문자가 아닌 데이터, 즉 원본 데이터에는 접근할 수 없다.<br>
- react-query-devtools에서는 변형된 구조의 데이터만 볼 수 있다.<ul>
<li>네트워크를 추적해야 원본 데이터 구조를 볼 수 있다.</li>
</ul></li>
<li>react-query가 최적화를 해줄 수 없다.<br>
- 데이터 fetching이 실행될 때마다 데이터 변형도 같이 동작한다.<ul>
<li>이것은 과도한 코스트로 다른 대안을 찾아보아야 할 원인이 될 수 있다.</li>
</ul></li>
<li>데이터 fetching을 추상화하여 API를 공유하는 경우 이 수준의 데이터 변형에 대한 접근 권한이 없을 수도 있다.</li>
</ul>
<blockquote>
<p>⭕ 장점</p>
</blockquote>
<ul>
<li>백엔드에서 데이터를 받은 것처럼 사용할 수 있다.<br>
</li>
</ul>
<blockquote>
<p>❌ 단점</p>
</blockquote>
<ul>
<li>변형된 데이터가 cache에 저장되어 원본 데이터 구조에 접근할 수 없다.</li>
<li>모든 데이터 fetching에서 작동한다.</li>
<li>자유롭게 변경할 수 없는 공유 API를 가진 경우 실현 불가능하다.</li>
</ul>
<h3 id="🟡-렌더링-함수에서-구현하기">🟡 렌더링 함수에서 구현하기</h3>
<ul>
<li>custom hook을 사용하여 데이터 변형을 할 수도 있다.</li>
</ul>
<pre class=" language-null"><code class=" language-null">const fetchAnimalList = async (): Promise&lt;Animal[]&gt; =&gt; {
  const response = await axios.get('/animalList/Seoul')
  return response.data
}

export const useGetAnimalList = () =&gt; {
  const queryInfo = useQuery({
    queryKey: ['animalList'],
    queryFn: fetchAnimalList,
  })

  return {
    ...queryInfo,
    data: queryInfo.data?.map((animal) =&gt; animal.name.toUpperCase()),
  }
}</code></pre>
<ul>
<li>이렇게 구현할 경우 모든 fetch 함수가 동작 시 뿐만 아니라 모든 렌더링 시 이 함수가 실행되게 된다.<br>
- 데이터 fetching을 포함하지 않는 렌더링에서도!</li>
</ul>
<pre class=" language-null"><code class=" language-null">👩‍💻 useMemo를 사용하여 이러한 문제를 해결해볼 수 있습니다.</code></pre>
<blockquote>
<p><code>useMemo</code>로 최적화하기</p>
</blockquote>
<ul>
<li>
<p>이때 주의할 점은, 종속성을 최대한 좁게 정의해야 한다는 것이다.</p>
<pre class=" language-null"><code class=" language-null">data: React.useMemo(
      () =&gt; queryInfo.data?.map((animal) =&gt; animal.name.toUpperCase()),
      [queryInfo]
)</code></pre>
<ul>
<li>이런 식으로 사용할 경우 <code>useMemo</code>를 사용하는 의미가 없다.</li>
<li><code>queryInfo</code>를 의존성 배열에 추가할 경우 결국 매 렌더링마다 다시 변형이 동작하는 것은 동일하기 때문이다.</li>
</ul>
</li>
<li>
<p>아래와 같은 방식으로 구현해보자.</p>
</li>
</ul>
<pre class=" language-null"><code class=" language-null">export const useGetAnimalList = () =&gt; {
  const queryInfo = useQuery({
    queryKey: ['animalList'],
    queryFn: fetchAnimalList,
  })

  return {
    ...queryInfo,
    data: React.useMemo(
      () =&gt; queryInfo.data?.map((animal) =&gt; animal.name.toUpperCase()),
      [queryInfo.data]
    ),
  }
}</code></pre>
<ul>
<li>
<p><code>queryInfo</code> 내부의 data는 무언가가 실제로 변하는 경우, 다시 말해 다시 데이터의 변형을 수행하고 싶은 상황이 아니라면 참조적으로 안전하다.</p>
</li>
<li>
<p>여기에 데이터 변형과 함께 추가로 사용하고 싶은 로직을 넣어주어도 좋다.<br>
- 하지만 데이터가 <code>undefined</code> 될 수 있으므로 옵셔널 체이닝을 꼭 같이 사용해주도록 하자.<br>
</p>
</li>
<li>
<p>추가로, React Query가 v4부터 <code>Tracked Queries</code> 추가해서 위의 <code>...queryInfo</code>와 같은 구조분해할당 코드는 지양하는 추세가 되었음에 주의하자.</p>
</li>
</ul>
<blockquote>
<p>⭕ 장점</p>
</blockquote>
<ul>
<li><code>useMemo</code>를 사용하여 최적화할 수 있다.<br>
</li>
</ul>
<blockquote>
<p>❌ 단점</p>
</blockquote>
<ul>
<li>개발자도구에서 정확한 형태를 검사할 수 없다.</li>
<li>구조가 조금 더 복잡해진다.</li>
<li>데이터가 <code>undefined</code> 될 수 있다.</li>
<li>tracked queries와 함께 사용하는 것은 권장되지 않는다.</li>
</ul>
<h2 id="🤠-select-옵션을-사용해봅시다">🤠 Select 옵션을 사용해봅시다!</h2>
<h3 id="-select-옵션">👾 Select 옵션</h3>
<ul>
<li>
<p><code>select: (data: TData) =&gt; unknown</code></p>
</li>
<li>
<p>optional한 속성이다.</p>
</li>
<li>
<p>query 함수로 반환되는 데이터의 일부를 변형하거나 선택할 수 있다.</p>
</li>
<li>
<p>반환되는 데이터의 값에 영향을 미치지만 쿼리 cache에 저장되는 값에는 영향을 미치지 않는다.</p>
</li>
<li>
<p>데이터가 존재할 때에만 selector가 호출되므로 <code>undefined</code> 값에 대해 걱정하지 않아도 된다.</p>
</li>
<li>
<p>예를 들어, <strong>동물 구분</strong>이 <strong>'개'</strong> 에 해당하는 동물을 필터링한다고 가정해보자.</p>
</li>
</ul>
<pre class=" language-null"><code class=" language-null">const useGetAnimalList = (queryKeys, func, filterLogic) =&gt; useQuery(
	[queryKeys],
    () =&gt; func(),
    {
    	select: (animals) =&gt; animals.filter(filterLogic)
    }
)</code></pre>
<ul>
<li>filter로직에는 <code>(animal) =&gt; animal.category === '개'</code>가 들어갈 수 있을 것이고, <code>category</code>와 <code>'개'</code> 부분만 재사용이 가능하도록 다른 값으로 바꾼다면 편리하게 useQuery만 사용해서 필터링 로직을 구현할 수 있다.</li>
<li>useQuery의 cache 된 데이터를 건드리지 않으면서 필터링을 구현하므로 useQuery의 normalization(정규화, 데이터 중복 방지)에 대한 장점과 필터링 로직을 동시에 사용할 수 있게 된다.</li>
</ul>
<h3 id="-selector-memoization">💾 Selector Memoization</h3>
<ul>
<li>selector 함수를 위의 코드와 같이 인라인 함수로 정의할 경우 매 렌더링마다 해당 함수가 동작하게 된다.<ul>
<li>이는 과도한 코스트를 발생시킬 수 있으므로 함수를 memoize하자!</li>
</ul></li>
</ul>
<blockquote>
<p><code>useCallback</code> 사용하기</p>
</blockquote>
<pre class=" language-null"><code class=" language-null">select: React.useCallback((animals) =&gt; animals.filter(filterLogic), [])</code></pre>
<blockquote>
<p>함수의 참조를 안정적으로 만들기</p>
</blockquote>
<pre class=" language-null"><code class=" language-null">const transFormLogic = (data: Animal[], filterLogic) =&gt;
  data.map((animals) =&gt; animals.filter(filterLogic))
  
const useGetAnimalList = (queryKeys, func, filterLogic) =&gt; useQuery(
	[queryKeys],
    () =&gt; func(),
    {
    	select: transFormLogic
    }
)</code></pre>
<h3 id="🧐-select해야-하는-값이-여러-종류라면">🧐 select해야 하는 값이 여러 종류라면?</h3>
<ul>
<li>select 옵션은 데이터의 일부만을 구독하기 위해 사용할 수도 있다.</li>
</ul>
<pre class=" language-null"><code class=" language-null">export const useGetAnimalList = (select) =&gt;
  useQuery({
    queryKey: ['animalList'],
    queryFn: fetchAnimalList,
    select,
  })

export const useOnlyCategory = (targetCategory: string) =&gt;
  useGetAnimalList((data) =&gt; data.map((animal) =&gt; animal.category))
  
export const useFindAnimal = (targetName: string) =&gt;
  useGetAnimalList((data) =&gt; data.find((animal) =&gt; animal.name === targetName))</code></pre>
<ul>
<li>이렇게 <code>useGetAnimalList</code>에 커스텀 selector들을 넘겨줌으로써 원본 데이터에서 필요한 데이터만 받아 쓸 수 있다.<br>
- 이때 select 함수를 인자로 넘겨주지 않을 경우 cache 된 전체 데이터가 반환된다.<ul>
<li>하지만 select 함수를 넘겨주면 해당 데이터만 확인할 수 있게 된다.</li>
</ul></li>
<li>만약 데이터에서 동물들의 이름이 바뀌었더라도 <code>useOnlyCategory</code>를 통해 카테고리 정보만 구독하고 있는 컴포넌트는 리렌더링되지 않는다.<br>
- 물론 React Query의 메타 데이터 중 <code>isFetching</code>의 상태 변화에 따라 두 번 렌더링 될 가능성은 있다.<br>
</li>
</ul>
<blockquote>
<p>⭕ 장점</p>
</blockquote>
<ul>
<li>최적화에 가장 적합하다.</li>
<li>부분적인 정보의 구독이 가능하다.<br>
</li>
</ul>
<blockquote>
<p>❌ 단점</p>
</blockquote>
<ul>
<li>데이터를 관찰하는 모든 부분에서 구조가 다를 수 있다.</li>
</ul>
<pre class=" language-null"><code class=" language-null">👩‍💻 이처럼 여러 방식들을 찾아보면서 select 옵션이 원하는 로직의 구현에 가장 적합하다는 결론을 내렸다! </code></pre>
<h4 id="-references">🔎 References</h4>
<ul>
<li><a href="https://tanstack.com/query/v4/docs/react/reference/useQuery">TanStack Query 공식문서_useQuery</a></li>
<li><a href="https://sangcho.tistory.com/entry/React-query-data-filter">[React-query]데이터 filtering하기</a></li>
<li><a href="https://tkdodo.eu/blog/react-query-data-transformations">React Query Data Transformations</a></li>
</ul></div></div></div><div class="sc-TBWPX dXONqK sc-dSfdvi eDPfgE"><div class="sc-gjNHFA kTQxVU"><div class="sc-fmciRz gPzODR"><div class="left"><a href="https://velog.io/@hamjw0122/posts" class="sc-egiyK cyyZlI"><img src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/image.jpg" alt="profile"></a><div class="sc-eXlEPa yXXbT"><div class="name"><a href="https://velog.io/@hamjw0122/posts" class="sc-egiyK cyyZlI">Jane</a></div><div class="description">An investment in knowledge pays the best interest🙃</div></div></div><div class="right"><div data-testid="follow-btn" class="sc-avest iIZjji"><button class="follow-button button"><span>팔로우</span></button></div></div></div><div class="sc-iFMAIt hbZRXU"></div><div class="sc-iqVWFU koQQwu"><a href="https://github.com/JeongwooHam" target="_blank" rel="noopener noreferrer" data-testid="github"><svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><mask id="github" width="20" height="20" x="0" y="0" maskUnits="userSpaceOnUse"><path fill="#ffffff" fill-rule="evenodd" d="M6.69 15.944c0 .08-.093.145-.21.145-.133.012-.226-.053-.226-.145 0-.081.093-.146.21-.146.12-.012.226.053.226.146zm-1.255-.182c-.028.08.053.173.174.198.105.04.226 0 .25-.081.024-.08-.053-.173-.174-.21-.104-.028-.221.012-.25.093zm1.783-.068c-.117.028-.198.104-.186.197.012.08.117.133.238.105.117-.028.198-.105.186-.186-.012-.076-.121-.129-.238-.116zM9.87.242C4.278.242 0 4.488 0 10.08c0 4.471 2.815 8.298 6.835 9.645.516.093.697-.226.697-.488 0-.25-.012-1.63-.012-2.476 0 0-2.822.605-3.415-1.202 0 0-.46-1.173-1.121-1.475 0 0-.924-.633.064-.621 0 0 1.004.08 1.557 1.04.883 1.557 2.363 1.109 2.94.843.092-.645.354-1.093.645-1.36-2.255-.25-4.529-.576-4.529-4.455 0-1.109.307-1.665.952-2.375-.105-.262-.448-1.342.105-2.738C5.56 4.157 7.5 5.51 7.5 5.51a9.474 9.474 0 0 1 2.532-.344c.86 0 1.726.117 2.533.343 0 0 1.939-1.355 2.782-1.089.552 1.4.21 2.476.105 2.738.645.714 1.04 1.27 1.04 2.375 0 3.891-2.375 4.202-4.63 4.456.372.319.686.923.686 1.87 0 1.36-.012 3.041-.012 3.372 0 .262.186.58.698.488C17.266 18.379 20 14.552 20 10.08 20 4.488 15.464.24 9.871.24zM3.919 14.149c-.052.04-.04.133.029.21.064.064.157.093.21.04.052-.04.04-.133-.029-.21-.064-.064-.157-.092-.21-.04zm-.435-.326c-.028.052.012.117.093.157.064.04.145.028.173-.028.028-.053-.012-.117-.093-.158-.08-.024-.145-.012-.173.029zm1.306 1.435c-.064.053-.04.174.053.25.092.093.21.105.262.04.052-.052.028-.173-.053-.25-.088-.092-.21-.104-.262-.04zm-.46-.593c-.064.04-.064.146 0 .238.065.093.174.133.226.093.065-.053.065-.157 0-.25-.056-.093-.16-.133-.225-.08z" clip-rule="evenodd"></path></mask><g mask="url(#github)"><path fill="currentColor" d="M0 0h20v20H0z"></path></g></svg></a><a href="mailto:hamjw0122@gmail.com"><svg width="32" height="32" fill="none" viewBox="0 0 32 32" data-testid="email"><path fill="currentColor" d="M16 16.871L1.019 5H30.98L16 16.871zm0 3.146L1 8.131V27h30V8.131L16 20.017z"></path></svg></a></div></div></div><div class="sc-TBWPX dXONqK sc-fIosxK dpmQGl"><div class="sc-gyElHZ bVYpNI"><a class="sc-gUQvok hlGICj" href="https://velog.io/@hamjw0122/useMutation-1-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0"><div class="sc-hjGZqJ fibSC"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></svg></div><div class="sc-fXeWAj fKjWde"><div class="description">이전<!-- --> 포스트</div><h3>🏵️ React-Query 제대로 사용해보기 (1) useMutation</h3></div></a></div><div class="sc-gyElHZ bVYpNI"><a class="sc-gUQvok jSBDGM" href="https://velog.io/@hamjw0122/FE-tailwind-merge"><div class="sc-hjGZqJ cMDwOh"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></svg></div><div class="sc-fXeWAj cQpWGt"><div class="description">다음<!-- --> 포스트</div><h3>tailwind-merge</h3></div></a></div></div><div class="sc-TBWPX dXONqK sc-kmQMED cALPIq"><ins class="adsbygoogle" style="display: block; text-align: center; height: 192px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-9161852896103498" data-ad-slot="6869845586" data-adsbygoogle-status="done"><div id="aswift_2_host" style="border: none; height: 192px; width: 768px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: inline-block;"></div></ins></div><div class="sc-TBWPX dXONqK sc-brSvTw cgYvDI"><h4>0<!-- -->개의 댓글</h4><div class="sc-gIDmLj"><div class="sc-evcjhq BdYrx"><textarea placeholder="댓글을 작성하세요" class="sc-fHeRUh fQjmlN" style="height: 70px;"></textarea><div class="buttons-wrapper"><button color="teal" class="sc-jrQzAO hSMJOX">댓글 <!-- -->작성</button></div></div><div class="sc-dVNjXY dDifDS"><div class="sc-xiLah"></div></div></div></div><div class="sc-TBWPX dXONqK sc-djWRfJ CLAfb"><div></div><div class="sc-bXTejn FTZwa"><h4>관련 채용 정보</h4><div class="sc-gIBqdA kXclot"><div class="sc-fyrocj iNzkAR"><a href="https://www.wanted.co.kr/wd/266142?client_id=KK03NuM8GrpMbYP7vrf8FxsI"><img src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/3vzegahom8zenekv__400_400.jpg" class="sc-iWVNaa hHzuUU"></a><div class="sc-jKTccl bElSym"><a href="https://www.wanted.co.kr/wd/266142?client_id=KK03NuM8GrpMbYP7vrf8FxsI"><img src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/0_5.48cad589.png"></a><div><a href="https://www.wanted.co.kr/wd/266142?client_id=KK03NuM8GrpMbYP7vrf8FxsI">에이치나인</a></div></div><a href="https://www.wanted.co.kr/wd/266142?client_id=KK03NuM8GrpMbYP7vrf8FxsI" class="sc-bUbRBg cQWYTq">프론트엔드 개발자(신입)</a><div class="sc-tAExr dWdpUD"><a href="https://www.wanted.co.kr/wd/266142?client_id=KK03NuM8GrpMbYP7vrf8FxsI">에이치나인은 디자인과 기술을 결합해 사용자 경험을 극대화하는 크리에이티브 그룹으로, 자유로운 팀 문화 속에서 신입 프론트엔드 개발로 성장할 수 있는 기회를 제공합니다. React 및 다양한 프레임워크를 활용한 웹 및 어플리케이션 개발에 참여하며, 협업을 통해 풍부한 경험을 쌓을 수 있습니다.</a></div></div><div class="sc-fyrocj iNzkAR"><a href="https://www.wanted.co.kr/wd/262946?client_id=KK03NuM8GrpMbYP7vrf8FxsI"><img src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/3twobzmntmcslihf__400_400.jpg" class="sc-iWVNaa hHzuUU"></a><div class="sc-jKTccl bElSym"><a href="https://www.wanted.co.kr/wd/262946?client_id=KK03NuM8GrpMbYP7vrf8FxsI"><img src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/0_5.0ad64c7d.png"></a><div><a href="https://www.wanted.co.kr/wd/262946?client_id=KK03NuM8GrpMbYP7vrf8FxsI">매스프레소(콴다)</a></div></div><a href="https://www.wanted.co.kr/wd/262946?client_id=KK03NuM8GrpMbYP7vrf8FxsI" class="sc-bUbRBg cQWYTq">Frontend Engineer (QANDA Core)</a><div class="sc-tAExr dWdpUD"><a href="https://www.wanted.co.kr/wd/262946?client_id=KK03NuM8GrpMbYP7vrf8FxsI">콴다와 함께 교육 기회의 평등을 현실로 만듭니다. React, Next.js와 같은 기술을 활용해 글로벌 사용자에게 혁신적인 학습 경험을 제공합니다.</a></div></div><div class="sc-fyrocj iNzkAR"><a href="https://www.wanted.co.kr/wd/258521?client_id=KK03NuM8GrpMbYP7vrf8FxsI"><img src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/sm3bnyaxeee9joyf__400_400.png" class="sc-iWVNaa hHzuUU"></a><div class="sc-jKTccl bElSym"><a href="https://www.wanted.co.kr/wd/258521?client_id=KK03NuM8GrpMbYP7vrf8FxsI"><img src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/0_4.8e5ab318.png"></a><div><a href="https://www.wanted.co.kr/wd/258521?client_id=KK03NuM8GrpMbYP7vrf8FxsI">브레이브모바일(숨고,Soomgo)</a></div></div><a href="https://www.wanted.co.kr/wd/258521?client_id=KK03NuM8GrpMbYP7vrf8FxsI" class="sc-bUbRBg cQWYTq">Front-end Engineer</a><div class="sc-tAExr dWdpUD"><a href="https://www.wanted.co.kr/wd/258521?client_id=KK03NuM8GrpMbYP7vrf8FxsI">숨고는 1,000만 사용자를 가진 생활 솔루션 마켓플레이스로, 혁신적인 연결을 통해 새로운 가치를 창출하고 있습니다. Front-end 엔지니어로서 Next.js, Typescript를 활용하여 서비스 퀄리티를 높이며, 동료와의 협업을 통해 기술적인 성장을 경험할 수 있습니다.</a></div></div></div></div></div></div><div class="sc-cNKqjZ fAciyn"><a href="https://graphcdn.io/?ref=powered-by"><img src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/badge.svg" alt="Powered by GraphCDN, the GraphQL CDN"></a></div><div class="Toastify"></div></div><script>window.__APOLLO_STATE__={"ROOT_QUERY":{"auth":null,"velog_config({\"username\":\"hamjw0122\"})":{"type":"id","generated":true,"id":"$ROOT_QUERY.velog_config({\"username\":\"hamjw0122\"})","typename":"VelogConfig"},"bannerAds({\"writer_username\":\"hamjw0122\"})":[],"post({\"url_slug\":\"React-Query-제대로-사용해보기-2-select\",\"username\":\"hamjw0122\"})":{"type":"id","generated":false,"id":"Post:704e8ce0-9b4b-40ce-a250-3923343f7e8e","typename":"Post"}},"$ROOT_QUERY.velog_config({\"username\":\"hamjw0122\"})":{"title":"Jane_Log","logo_image":null,"__typename":"VelogConfig"},"Post:704e8ce0-9b4b-40ce-a250-3923343f7e8e":{"id":"704e8ce0-9b4b-40ce-a250-3923343f7e8e","title":"🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기","released_at":"2023-11-11T18:11:20.596Z","updated_at":"2025-03-19T00:06:47.105Z","tags":{"type":"json","json":["React","react-query","라이브러리"]},"body":"## 🤔 찾아보게 된 계기\n\n토이 프로젝트에서 Open API에서 불러온 데이터를 필터링하는 로직을 구현하게 되었다.\n![](https://velog.velcdn.com/images/hamjw0122/post/719c1a86-eb5f-4517-abf7-5521a87bb8bb/image.png)\n\n위와 같은 형태의 컴포넌트였는데, 어떻게 필터값을 반영해야 할 지에 대해 고민이 많았다.\n물론 필터링 종류가 많아서도 맞지만, 가장 고민이었던 점은\nOpen API에서 값을 받아오기 때문에 원하는 필터 값을 프론트에서 직접 구현해야 한다는 점이었다.\n어떻게 하면 클라이언트에서 필터링 되지 않은 채로 받은 응답 값을 정제할 때,\n최소한의 API 요청과 최대한의 퍼포먼스를 낼 수 있을까?\n이에 대해 react-query의 데이터를 변형하는 좋은 방법들이 있어서 정리해보고자 한다.\n\n```\n👩‍💻 가능하다면 백엔드에서 처리하는 것도 좋은 방법입니다.!\n```\n\n## 데이터를 변형할 수 있는 방법들\n\n### 🟠 queryFn에서 구현하기\n\n- queryFn\n\t- \u003ccode>useQuery\u003c/code>에 전달해야 하는 함수이다.\n    - Promise 값을 반환할 것을 예상하며, 결과 값은 query cache에 저장된다.\n- 하지만 꼭 백엔드에서 전달되는 값 원형 그대로를 반환할 필요는 없으므로 queryFn을 통해서 값을 변형하는 것도 가능하다.\n\t- 이를 통해 프론트엔드에서는 마치 원래 백엔드에서 이 형태의 값을 전달받은 것처럼 사용할 수 있다.\n\n```\nconst fetchAnimalList = async (): Promise\u003cAnimal[]> => {\n  const response = await axios.get('/animalList/Seoul')\n  const data: Animal[] = response.data\n\n  return data.map((animal) => animal.name.toUpperCase())\n}\n\nexport const useGetAnimalList = () =>\n  useQuery({\n    queryKey: ['animalList'],\n    queryFn: fetchAnimalList,\n  })\n\n```\n\n- 위의 코드의 경우, 프론트엔드 측에서는 동물의 이름이 대문자가 아닌 데이터, 즉 원본 데이터에는 접근할 수 없다.\n\t- react-query-devtools에서는 변형된 구조의 데이터만 볼 수 있다.\n    - 네트워크를 추적해야 원본 데이터 구조를 볼 수 있다.\n- react-query가 최적화를 해줄 수 없다.\n\t- 데이터 fetching이 실행될 때마다 데이터 변형도 같이 동작한다.\n    - 이것은 과도한 코스트로 다른 대안을 찾아보아야 할 원인이 될 수 있다.\n- 데이터 fetching을 추상화하여 API를 공유하는 경우 이 수준의 데이터 변형에 대한 접근 권한이 없을 수도 있다.\n\n\n> ⭕ 장점\n\t\n- 백엔드에서 데이터를 받은 것처럼 사용할 수 있다.\n    \n> ❌ 단점\n\n- 변형된 데이터가 cache에 저장되어 원본 데이터 구조에 접근할 수 없다.\n- 모든 데이터 fetching에서 작동한다.\n- 자유롭게 변경할 수 없는 공유 API를 가진 경우 실현 불가능하다.\n\n### 🟡 렌더링 함수에서 구현하기\n\n- custom hook을 사용하여 데이터 변형을 할 수도 있다.\n\n```\nconst fetchAnimalList = async (): Promise\u003cAnimal[]> => {\n  const response = await axios.get('/animalList/Seoul')\n  return response.data\n}\n\nexport const useGetAnimalList = () => {\n  const queryInfo = useQuery({\n    queryKey: ['animalList'],\n    queryFn: fetchAnimalList,\n  })\n\n  return {\n    ...queryInfo,\n    data: queryInfo.data?.map((animal) => animal.name.toUpperCase()),\n  }\n}\n```\n\n- 이렇게 구현할 경우 모든 fetch 함수가 동작 시 뿐만 아니라 모든 렌더링 시 이 함수가 실행되게 된다.\n\t- 데이터 fetching을 포함하지 않는 렌더링에서도!\n\n```\n👩‍💻 useMemo를 사용하여 이러한 문제를 해결해볼 수 있습니다.\n```\n\n> \u003ccode>useMemo\u003c/code>로 최적화하기\n\n- 이때 주의할 점은, 종속성을 최대한 좁게 정의해야 한다는 것이다.\n\n    ```\n    data: React.useMemo(\n          () => queryInfo.data?.map((animal) => animal.name.toUpperCase()),\n          [queryInfo]\n    )\n    ```\n  - 이런 식으로 사용할 경우 \u003ccode>useMemo\u003c/code>를 사용하는 의미가 없다.\n  - \u003ccode>queryInfo\u003c/code>를 의존성 배열에 추가할 경우 결국 매 렌더링마다 다시 변형이 동작하는 것은 동일하기 때문이다.\n\n- 아래와 같은 방식으로 구현해보자.\n\n```\nexport const useGetAnimalList = () => {\n  const queryInfo = useQuery({\n    queryKey: ['animalList'],\n    queryFn: fetchAnimalList,\n  })\n\n  return {\n    ...queryInfo,\n    data: React.useMemo(\n      () => queryInfo.data?.map((animal) => animal.name.toUpperCase()),\n      [queryInfo.data]\n    ),\n  }\n}\n```\n\n  - \u003ccode>queryInfo\u003c/code> 내부의 data는 무언가가 실제로 변하는 경우, 다시 말해 다시 데이터의 변형을 수행하고 싶은 상황이 아니라면 참조적으로 안전하다.\n\n- 여기에 데이터 변형과 함께 추가로 사용하고 싶은 로직을 넣어주어도 좋다.\n\t- 하지만 데이터가 \u003ccode>undefined\u003c/code> 될 수 있으므로 옵셔널 체이닝을 꼭 같이 사용해주도록 하자.\n    \n- 추가로, React Query가 v4부터 \u003ccode>Tracked Queries\u003c/code> 추가해서 위의 \u003ccode>...queryInfo\u003c/code>와 같은 구조분해할당 코드는 지양하는 추세가 되었음에 주의하자.\n\n> ⭕ 장점\n\t\n- \u003ccode>useMemo\u003c/code>를 사용하여 최적화할 수 있다.\n    \n> ❌ 단점\n\n- 개발자도구에서 정확한 형태를 검사할 수 없다.\n- 구조가 조금 더 복잡해진다.\n- 데이터가 \u003ccode>undefined\u003c/code> 될 수 있다.\n- tracked queries와 함께 사용하는 것은 권장되지 않는다.\n\n\n## 🤠 Select 옵션을 사용해봅시다!\n\n### 👾 Select 옵션\n\n- \u003ccode>select: (data: TData) => unknown\u003c/code>\n- optional한 속성이다.\n- query 함수로 반환되는 데이터의 일부를 변형하거나 선택할 수 있다.\n- 반환되는 데이터의 값에 영향을 미치지만 쿼리 cache에 저장되는 값에는 영향을 미치지 않는다.\n- 데이터가 존재할 때에만 selector가 호출되므로 \u003ccode>undefined\u003c/code> 값에 대해 걱정하지 않아도 된다.\n\n- 예를 들어, **동물 구분**이 **'개'** 에 해당하는 동물을 필터링한다고 가정해보자.\n```\nconst useGetAnimalList = (queryKeys, func, filterLogic) => useQuery(\n\t[queryKeys],\n    () => func(),\n    {\n    \tselect: (animals) => animals.filter(filterLogic)\n    }\n)\n```\n- filter로직에는 \u003ccode>(animal) => animal.category === '개'\u003c/code>가 들어갈 수 있을 것이고, \u003ccode>category\u003c/code>와 \u003ccode>'개'\u003c/code> 부분만 재사용이 가능하도록 다른 값으로 바꾼다면 편리하게 useQuery만 사용해서 필터링 로직을 구현할 수 있다.\n- useQuery의 cache 된 데이터를 건드리지 않으면서 필터링을 구현하므로 useQuery의 normalization(정규화, 데이터 중복 방지)에 대한 장점과 필터링 로직을 동시에 사용할 수 있게 된다.\n\n### 💾 Selector Memoization\n\n- selector 함수를 위의 코드와 같이 인라인 함수로 정의할 경우 매 렌더링마다 해당 함수가 동작하게 된다.\n  - 이는 과도한 코스트를 발생시킬 수 있으므로 함수를 memoize하자!\n  \n> \u003ccode>useCallback\u003c/code> 사용하기\n\n```\nselect: React.useCallback((animals) => animals.filter(filterLogic), [])\n```\n\n> 함수의 참조를 안정적으로 만들기\n\n```\nconst transFormLogic = (data: Animal[], filterLogic) =>\n  data.map((animals) => animals.filter(filterLogic))\n  \nconst useGetAnimalList = (queryKeys, func, filterLogic) => useQuery(\n\t[queryKeys],\n    () => func(),\n    {\n    \tselect: transFormLogic\n    }\n)\n```\n\n### 🧐 select해야 하는 값이 여러 종류라면?\n\n- select 옵션은 데이터의 일부만을 구독하기 위해 사용할 수도 있다.\n\n```\nexport const useGetAnimalList = (select) =>\n  useQuery({\n    queryKey: ['animalList'],\n    queryFn: fetchAnimalList,\n    select,\n  })\n\nexport const useOnlyCategory = (targetCategory: string) =>\n  useGetAnimalList((data) => data.map((animal) => animal.category))\n  \nexport const useFindAnimal = (targetName: string) =>\n  useGetAnimalList((data) => data.find((animal) => animal.name === targetName))\n```\n\n- 이렇게 \u003ccode>useGetAnimalList\u003c/code>에 커스텀 selector들을 넘겨줌으로써 원본 데이터에서 필요한 데이터만 받아 쓸 수 있다.\n\t- 이때 select 함수를 인자로 넘겨주지 않을 경우 cache 된 전체 데이터가 반환된다.\n    - 하지만 select 함수를 넘겨주면 해당 데이터만 확인할 수 있게 된다.\n- 만약 데이터에서 동물들의 이름이 바뀌었더라도 \u003ccode>useOnlyCategory\u003c/code>를 통해 카테고리 정보만 구독하고 있는 컴포넌트는 리렌더링되지 않는다.\n\t- 물론 React Query의 메타 데이터 중 \u003ccode>isFetching\u003c/code>의 상태 변화에 따라 두 번 렌더링 될 가능성은 있다.\n    \n> ⭕ 장점\n\t\n- 최적화에 가장 적합하다.\n- 부분적인 정보의 구독이 가능하다.\n    \n> ❌ 단점\n\n- 데이터를 관찰하는 모든 부분에서 구조가 다를 수 있다.\n\n```\n👩‍💻 이처럼 여러 방식들을 찾아보면서 select 옵션이 원하는 로직의 구현에 가장 적합하다는 결론을 내렸다! \n```\n\n#### 🔎 References\n- [TanStack Query 공식문서_useQuery](https://tanstack.com/query/v4/docs/react/reference/useQuery)\n- [[React-query]데이터 filtering하기](https://sangcho.tistory.com/entry/React-query-data-filter)\n- [React Query Data Transformations](https://tkdodo.eu/blog/react-query-data-transformations)","short_description":"어떻게 프론트엔드에서 데이터를 필터링할 수 있을까?\n","is_markdown":true,"is_private":false,"is_temp":false,"thumbnail":"https://velog.velcdn.com/images/hamjw0122/post/d68c802d-33ec-4bc8-b809-f624d8ada377/image.png","comments_count":0,"url_slug":"React-Query-제대로-사용해보기-2-select","likes":3,"liked":false,"user":{"type":"id","generated":false,"id":"User:c7e4f883-575e-4da6-aee8-474983def4ab","typename":"User"},"comments":[],"__typename":"Post","series":{"type":"id","generated":false,"id":"Series:2e592821-4130-4930-bd0f-f0a9582ee027","typename":"Series"},"linked_posts":{"type":"id","generated":true,"id":"$Post:704e8ce0-9b4b-40ce-a250-3923343f7e8e.linked_posts","typename":"LinkedPosts"}},"User:c7e4f883-575e-4da6-aee8-474983def4ab":{"id":"c7e4f883-575e-4da6-aee8-474983def4ab","username":"hamjw0122","is_followed":false,"profile":{"type":"id","generated":false,"id":"UserProfile:0c7a8146-05c9-4412-9c9e-8a3376f8e3d0","typename":"UserProfile"},"velog_config":{"type":"id","generated":true,"id":"$User:c7e4f883-575e-4da6-aee8-474983def4ab.velog_config","typename":"VelogConfig"},"__typename":"User"},"UserProfile:0c7a8146-05c9-4412-9c9e-8a3376f8e3d0":{"id":"0c7a8146-05c9-4412-9c9e-8a3376f8e3d0","display_name":"Jane","thumbnail":"https://velog.velcdn.com/images/hamjw0122/profile/1184941a-9eab-4f72-a525-1370811fbd78/image.jpg","short_bio":"An investment in knowledge pays the best interest🙃","profile_links":{"type":"json","json":{"email":"hamjw0122@gmail.com","github":"https://github.com/JeongwooHam"}},"__typename":"UserProfile"},"$User:c7e4f883-575e-4da6-aee8-474983def4ab.velog_config":{"title":"Jane_Log","__typename":"VelogConfig"},"Series:2e592821-4130-4930-bd0f-f0a9582ee027":{"id":"2e592821-4130-4930-bd0f-f0a9582ee027","name":"프레임워크/라이브러리","url_slug":"라이브러리-적용기","series_posts":[{"type":"id","generated":false,"id":"SeriesPost:62c6fe2b-ecd9-4caa-b40a-5a5b24d0d0a0","typename":"SeriesPost"},{"type":"id","generated":false,"id":"SeriesPost:08b8505c-007e-4030-84bb-ae89ccdebcee","typename":"SeriesPost"},{"type":"id","generated":false,"id":"SeriesPost:d41076f3-8368-4bde-aa20-8f6803619105","typename":"SeriesPost"},{"type":"id","generated":false,"id":"SeriesPost:74517f4d-5402-4244-8090-f64d6f0d9454","typename":"SeriesPost"},{"type":"id","generated":false,"id":"SeriesPost:2e616133-7b11-4d86-8fe9-7d7d2ddabc05","typename":"SeriesPost"}],"__typename":"Series"},"SeriesPost:62c6fe2b-ecd9-4caa-b40a-5a5b24d0d0a0":{"id":"62c6fe2b-ecd9-4caa-b40a-5a5b24d0d0a0","post":{"type":"id","generated":false,"id":"Post:637dd851-4ce4-456a-9452-05ddf89adbd8","typename":"Post"},"__typename":"SeriesPost"},"Post:637dd851-4ce4-456a-9452-05ddf89adbd8":{"id":"637dd851-4ce4-456a-9452-05ddf89adbd8","title":"✨ 우리가 Moment.js 대신 Day.js를 사용해야 하는 이유","url_slug":"우리가-moment.js-대신-day.js를-사용해야-하는-이유","user":{"type":"id","generated":false,"id":"User:c7e4f883-575e-4da6-aee8-474983def4ab","typename":"User"},"__typename":"Post"},"SeriesPost:08b8505c-007e-4030-84bb-ae89ccdebcee":{"id":"08b8505c-007e-4030-84bb-ae89ccdebcee","post":{"type":"id","generated":false,"id":"Post:5fedccf6-4ef4-49dd-95d0-d33ed5250234","typename":"Post"},"__typename":"SeriesPost"},"Post:5fedccf6-4ef4-49dd-95d0-d33ed5250234":{"id":"5fedccf6-4ef4-49dd-95d0-d33ed5250234","title":"🦕 Supabase란 무엇인가!","url_slug":"Supabase란-무엇인가","user":{"type":"id","generated":false,"id":"User:c7e4f883-575e-4da6-aee8-474983def4ab","typename":"User"},"__typename":"Post"},"SeriesPost:d41076f3-8368-4bde-aa20-8f6803619105":{"id":"d41076f3-8368-4bde-aa20-8f6803619105","post":{"type":"id","generated":false,"id":"Post:b622a873-78c2-46dc-93da-4a6140bef57e","typename":"Post"},"__typename":"SeriesPost"},"Post:b622a873-78c2-46dc-93da-4a6140bef57e":{"id":"b622a873-78c2-46dc-93da-4a6140bef57e","title":"🏵️ React-Query 제대로 사용해보기 (1) useMutation","url_slug":"useMutation-1-알아보기","user":{"type":"id","generated":false,"id":"User:c7e4f883-575e-4da6-aee8-474983def4ab","typename":"User"},"__typename":"Post"},"SeriesPost:74517f4d-5402-4244-8090-f64d6f0d9454":{"id":"74517f4d-5402-4244-8090-f64d6f0d9454","post":{"type":"id","generated":false,"id":"Post:704e8ce0-9b4b-40ce-a250-3923343f7e8e","typename":"Post"},"__typename":"SeriesPost"},"SeriesPost:2e616133-7b11-4d86-8fe9-7d7d2ddabc05":{"id":"2e616133-7b11-4d86-8fe9-7d7d2ddabc05","post":{"type":"id","generated":false,"id":"Post:88ce36bf-4b06-4e39-bf02-433c98a3d059","typename":"Post"},"__typename":"SeriesPost"},"Post:88ce36bf-4b06-4e39-bf02-433c98a3d059":{"id":"88ce36bf-4b06-4e39-bf02-433c98a3d059","title":"tailwind-merge","url_slug":"FE-tailwind-merge","user":{"type":"id","generated":false,"id":"User:c7e4f883-575e-4da6-aee8-474983def4ab","typename":"User"},"__typename":"Post"},"$Post:704e8ce0-9b4b-40ce-a250-3923343f7e8e.linked_posts":{"previous":{"type":"id","generated":false,"id":"Post:b622a873-78c2-46dc-93da-4a6140bef57e","typename":"Post"},"next":{"type":"id","generated":false,"id":"Post:88ce36bf-4b06-4e39-bf02-433c98a3d059","typename":"Post"},"__typename":"LinkedPosts"}};</script><script>window.__REDUX_STATE__={"core":{"layer":false,"auth":{"visible":false,"mode":"LOGIN"},"user":null,"popup":{"visible":false,"title":"","message":""}},"write":{"mode":"MARKDOWN","markdown":"","title":"","html":"","tags":[],"publish":false,"textBody":"","defaultDescription":"","description":"","isPrivate":false,"urlSlug":"","thumbnail":null,"editSeries":false,"selectedSeries":null,"postId":null,"isTemp":false,"initialTitle":"","initialBody":""},"header":{"custom":true,"userLogo":{"title":"Jane_Log","logo_image":null},"username":"hamjw0122"},"post":{"id":null},"error":{"errorType":null},"scroll":{"main":0,"user/posts":0},"home":{"timeframe":"week"},"darkMode":{"theme":"default","systemTheme":"not-ready"}};</script><script id="__LOADABLE_REQUIRED_CHUNKS__" type="application/json">[18,0,23,1,3]</script><script id="__LOADABLE_REQUIRED_CHUNKS___ext" type="application/json">{"namedChunks":["pages-velog-VelogPage","PostPage"]}</script><script async="" data-chunk="main" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/runtime-main.43efb87e.js"></script><script async="" data-chunk="main" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/20.d22ca79b.chunk.js"></script><script async="" data-chunk="main" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/main.7939daee.chunk.js"></script><script async="" data-chunk="pages-velog-VelogPage" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/pages-velog-VelogPage.3343bdaf.chunk.js"></script><script async="" data-chunk="PostPage" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/0.9dceead3.chunk.js"></script><script async="" data-chunk="PostPage" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/23.16ad14b0.chunk.js"></script><script async="" data-chunk="PostPage" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/1.91809a3e.chunk.js"></script><script async="" data-chunk="PostPage" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/PostPage.8d064426.chunk.js"></script><textarea tab-index="-1" aria-hidden="true" style="min-height: 0px !important; max-height: none !important; height: 0px !important; visibility: hidden !important; overflow: hidden !important; position: absolute !important; z-index: -1000 !important; top: 0px !important; right: 0px !important; letter-spacing: normal; line-height: 28px; font-family: -apple-system, &quot;system-ui&quot;, &quot;Helvetica Neue&quot;, &quot;Apple SD Gothic Neo&quot;, &quot;Malgun Gothic&quot;, &quot;맑은 고딕&quot;, 나눔고딕, &quot;Nanum Gothic&quot;, &quot;Noto Sans KR&quot;, &quot;Noto Sans CJK KR&quot;, arial, 돋움, Dotum, Tahoma, Geneva, sans-serif; font-weight: 400; font-size: 16px; font-style: normal; tab-size: 8; text-rendering: auto; text-transform: none; width: 768px; text-indent: 0px; padding: 16px 16px 24px; border-width: 1px; box-sizing: border-box;"></textarea><ins class="adsbygoogle adsbygoogle-noablate" data-adsbygoogle-status="done" style="display: none !important;" data-ad-status="unfilled"><div id="aswift_0_host" style="border: none; height: 0px; width: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: inline-block;"><iframe id="aswift_0" name="aswift_0" browsingtopics="true" style="left:0;position:absolute;top:0;border:0;width:undefinedpx;height:undefinedpx;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allow="attribution-reporting; run-ad-auction" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/ads(1).html" data-google-container-id="a!1" tabindex="0" title="Advertisement" aria-label="Advertisement" data-load-complete="true"></iframe></div></ins><iframe name="googlefcPresent" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/saved_resource(1).html"></iframe><iframe name="__tcfapiLocator" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/saved_resource(2).html" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;"></iframe><iframe name="googlefcInactive" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/saved_resource(3).html" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;"></iframe><iframe name="googlefcLoaded" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/saved_resource(4).html" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;"></iframe><div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; width: 0px; height: 0px;"><div></div></div></div><iframe src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/aframe.html" width="0" height="0" style="display: none;"></iframe></body><iframe id="google_esf" name="google_esf" src="./🏵️ React-Query 제대로 사용해보기 (2) 데이터 변형해보기_files/zrt_lookup_fy2021.html" style="display: none;"></iframe></html>